<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Monaco ESM Basic</title>
    <style>
      html, body {
        height: 100%;
        margin: 0;
      }
      #container {
        height: 100vh;
        width: 100vw;
      }
    </style>
  </head>
  <body>
    <div id="container" style="height: 100%"></div>
    <script type="module">
      // The simplest way to load Monaco Editor with native ESM and NO BUNDLER
      // is using esm.sh, which automatically handles CSS imports.
      import * as monaco from 'https://esm.sh/monaco-editor@0.55.1';

      // Setting up the Monaco Environment to load workers from the same CDN
      self.MonacoEnvironment = {
        getWorkerUrl: function (moduleId, label) {
          const getWorker = (file) => {
            
            return `data:text/javascript;charset=utf-8,${encodeURIComponent(`
              self.MonacoEnvironment = { baseUrl: 'https://esm.sh/monaco-editor@0.55.1/esm/' };
              importScripts('https://esm.sh/monaco-editor@0.55.1/esm/vs/${file}');`
            )}`;
          };
          if (label === 'json') return getWorker('language/json/json.worker.js');
          if (label === 'css' || label === 'scss' || label === 'less') return getWorker('language/css/css.worker.js');
          if (label === 'html' || label === 'handlebars' || label === 'razor') return getWorker('language/html/html.worker.js');
          if (label === 'typescript' || label === 'javascript') return getWorker('language/typescript/ts.worker.js');
          return getWorker('editor/editor.worker.js');
        }
      };

      const value = `function hello() {
	alert('Hello world!');
}`;

      const myEditor = monaco.editor.create(document.getElementById("container"), {
        value,
        language: "javascript",
        theme: "vs-dark",
        automaticLayout: true,
      });
    </script>
  </body>
</html>
